<!doctype html>
<html lang="en">
  <head>
    @@include("partials/head.html", {
      "title": "Dashkit"
    })
  </head>
  <body>

    <!-- SIDEBAR
    ================================================== -->
    @@include("partials/sidebar.html", {
      "category": "pages",
      "subcategory": "",
      "page": "orders.html",
      "user": true
    })

    <!-- MAIN CONTENT
    ================================================== -->
    <div class="main-content">
      <div class="container-fluid">
        <div class="row justify-content-center">
          <div class="col-12 col-lg-10 col-xl-8">

            <!-- Header -->
            <div class="header mt-md-5">
              <div class="header-body">
                <div class="row align-items-center">
                  <div class="col">

                    <!-- Pretitle -->
                    <h6 class="header-pretitle">
                      Overview
                    </h6>

                    <!-- Title -->
                    <h1 class="header-title">
                      Machine Learning
                    </h1>

                  </div>
                </div> <!-- / .row -->

              </div>
            </div>
                <div class="row">
                    <div class="col">
                        <h2>
                         Select Datasets
                     </h2>
                    </div>
                </div>
                <div class="row">
                <div class="col-12 col-md-6">

                  <!-- Flagged Records -->
                  <div class="form-group">

                    <!-- Label -->
                    <label class="mb-1">
                      Critical Errors
                    </label>

                    <!-- Form text -->
                    <small class="form-text text-muted">
                      Emphasize records where the car struggles the most (error > 80%).
                    </small>

                    <div class="row" style="text-align:center !important">
                      <div class="col">
                        <!-- Toggle -->
                          <small class="text-muted">
                          Train
                        </small>
                        <div class="custom-control custom-checkbox-toggle" style="margin:auto">
                          <input type="checkbox" class="custom-control-input tracked-toggle" id="train-critical-errors" toggle-web-page="machine learning" toggle-name="critical errors" toggle-detail="train">
                          <label class="custom-control-label" for="train-critical-errors"></label>
                        </div>
                      </div>
                        <div class="col">
                        <!-- Toggle -->
                            <small class="text-muted">
                          Test
                        </small>
                        <div class="custom-control custom-checkbox-toggle" style="margin:auto">
                          <input type="checkbox" class="custom-control-input tracked-toggle" id="validation-critical-errors" toggle-web-page="machine learning" toggle-name="critical errors" toggle-detail="validation">
                          <label class="custom-control-label" for="validation-critical-errors"></label>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
                <div class="col-12 col-md-6">

                  <!-- Real-Time Records -->
                  <div class="form-group">

                    <!-- Label -->
                    <label class="mb-1">
                      Flagged Records
                    </label>

                    <!-- Form text -->
                    <small class="form-text text-muted">
                      Incorporate records that you flagged in the datasets section.
                    </small>

                    <div class="row" style="text-align:center !important">
                      <div class="col">
                        <!-- Toggle -->
                          <small class="text-muted">
                          Train
                        </small>
                        <div class="custom-control custom-checkbox-toggle" style="margin:auto">
                          <input type="checkbox" class="custom-control-input tracked-toggle" id="train-flags" toggle-web-page="machine learning" toggle-name="flagged records" toggle-detail="train">
                          <label class="custom-control-label" for="train-flags"></label>
                        </div>
                      </div>
                        <div class="col">
                        <!-- Toggle -->
                            <small class="text-muted">
                          Test
                        </small>
                        <div class="custom-control custom-checkbox-toggle" style="margin:auto">
                          <input type="checkbox" class="custom-control-input tracked-toggle" id="validation-flags" toggle-web-page="machine learning" toggle-name="flagged records" toggle-detail="validation">
                          <label class="custom-control-label" for="validation-flags"></label>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
              </div>

              <div class="card" id="datasets-table-div" data-toggle="lists" data-lists-values='["dataset-id", "images"]'>
                <div class="card-header">
                  <div class="row align-items-center">
                    <div class="col">
                      <!-- Search -->
                      <form class="row align-items-center">
                        <div class="col-auto pr-0">
                          <span class="fe fe-search text-muted"></span>
                        </div>
                        <div class="col">
                            <input type="search" class="form-control form-control-flush search" placeholder="Search">
                        </div>
                      </form>
                    </div>
                  </div> <!-- / .row -->
                </div>
                <div class="table-responsive">
                  <table class="table table-sm table-nowrap card-table">
                    <thead>
                      <tr>
                        <th>
                          <div class="custom-control custom-checkbox table-checkbox">
                            <input type="checkbox" class="custom-control-input" id="trainSelectAll">
                            <label class="custom-control-label" for="trainSelectAll">
                              &nbsp; Train
                            </label>
                          </div>
                        </th>
                        <th>
                          <div class="custom-control custom-checkbox table-checkbox">
                            <input type="checkbox" class="custom-control-input" id="validationSelectAll">
                            <label class="custom-control-label" for="validationSelectAll">
                              &nbsp; Validation
                            </label>
                          </div>
                        </th>
                        <th>
                          <a href="#" class="text-muted sort" data-sort="dataset-id">
                            Dataset ID
                          </a>
                        </th>
                        <th>
                          <a href="#" class="text-muted sort" data-sort="images">
                            Images
                          </a>
                        </th>
                      </tr>
                    </thead>
                    <tbody class="list" id="datasetsTbody">
                    </tbody>
                  </table>
                </div>
              </div>


              <!-- Divider -->
            <hr class="mt-4 mb-5">

            <div class="row">
              <div class="col">
                 <h2>
                     Models
                 </h2>
              </div>
            </div>
            <div class="card" id="models-table-div" data-toggle="lists" data-lists-values='["dataset-id", "images"]'>
                <div class="card-header">
                  <div class="row align-items-center">
                    <div class="col">
                      <!-- Search -->
                      <form class="row align-items-center">
                        <div class="col-auto pr-0">
                          <span class="fe fe-search text-muted"></span>
                        </div>
                        <div class="col">
                            <input type="search" class="form-control form-control-flush search" placeholder="Search">
                        </div>
                      </form>
                    </div>
                      <div class="col-auto">
                        <!-- Button -->
                        <div class="dropdown">
                          <button class="btn btn-sm btn-white dropdown-toggle" type="button" id="bulkActionDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Bulk action
                          </button>
                          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="bulkActionDropdown">
                            <div class="row">
                              <div class="col">
                                <button id="delete-model-bulk-action" class="btn delete-model-action">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2" style="width: 2em;">
                                        <polyline points="3 6 5 6 21 6"></polyline>
                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                        <line x1="10" y1="11" x2="10" y2="17"></line>
                                        <line x1="14" y1="11" x2="14" y2="17"></line>
                                    </svg>
                                    Delete Models
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                  </div> <!-- / .row -->
                </div>
                <div class="table-responsive">
                  <table class="table table-sm table-nowrap card-table">
                    <thead>
                      <tr>
                          <th>
                          <div class="custom-control custom-checkbox table-checkbox">
                            <input type="checkbox" class="custom-control-input" id="modelSelectAll">
                            <label class="custom-control-label" for="modelSelectAll">
                              &nbsp; Train
                            </label>
                          </div>
                        </th>
                        <th>
                          <a href="#" class="text-muted sort" data-sort="model-id">
                            Model ID
                          </a>
                        </th>
                        <th>
                          <a href="#" class="text-muted sort" data-sort="model-created-ts">
                            Created
                          </a>
                        </th>
                        <th>
                          <a href="#" class="text-muted sort" data-sort="model-top-crop-percent">
                            Top Crop %
                          </a>
                        </th>
                        <th>
                          <a href="#" class="text-muted sort" data-sort="model-image-scale">
                            Image Scale
                          </a>
                        </th>
                          <th colspan="1">
                          </th>
                      </tr>
                    </thead>
                    <tbody class="list" id="modelsTbody">
                    </tbody>
                  </table>
                </div>
            </div>

              <!-- Divider -->
              <hr class="mt-4 mb-5">

              <div class="row">
                  <div class="col">

                     <h2>
                         Train Model
                     </h2>
                      <small class="form-text text-muted">
                      Start the training of a new model or resume the training of an existing model with transfer learning. The model learns from datasets specified in the previous section.
                    </small>
                  </div>
              </div>

            <form>
                <div class="form-group">
                    <label for="newOrExistingModel">Train A New or Existing Model</label>
                    <select class="form-control" id="newOrExistingModel">
                        <option id="new-model-option">New</option>
                        <option id="existing-model-option">Existing</option>
                    </select>
                </div>
                <div id="train-existing-model-id-option-div" class="form-group" style="display:none">
                    <label for="resumeTrainingExistingModelId">Model ID</label>
                    <select class="form-control" id="resumeTrainingExistingModelId">
                    </select>
                </div>
            </form>

              <div id="train-sliders" class="row">
                  <div class="col-12 col-lg-6 col-xl">
                    <!-- Card -->
                    <div class="card">
                      <div class="card-body">
                        <div class="row align-items-center">
                          <div class="col">
                            <div class="row">
                              <div class="col">
                                <p class="card-header-title">
                                  <b>Image Top Cut:&nbsp;</b>
                                  <span id="image-top-cut-slider-text"></span>
                                </p>
                                <input id="image-top-cut-slider" class="bslider form-control" type="text" value="">
                              </div>
                            </div>
                          </div>
                        </div> <!-- / .row -->
                      </div>
                    </div>
                  </div>
                  <div class="col-12 col-lg-6 col-xl">
                    <!-- Card -->
                    <div class="card">
                      <div class="card-body">
                        <div class="row align-items-center">
                          <div class="col">
                            <div class="row">
                              <div class="col">
                                <p class="card-header-title">
                                  <b>Image Scale:&nbsp;</b>
                                  <span id="image-scale-slider-text"></span>
                                </p>
                                <input id="image-scale-slider" class="bslider form-control" type="text" value="">
                              </div>
                            </div>
                          </div>
                        </div> <!-- / .row -->
                      </div>
                    </div>
                  </div>
              </div>

              <div class="card" id="epochs-table-div" data-toggle="lists" data-lists-values='["dataset-id", "created-date", "images"]'>
                <div class="card-header">
                  <div class="row align-items-center">
                    <div class="col">
                      Training Error Progress
                    </div>
                  </div> <!-- / .row -->
                </div>
                <div class="table-responsive">
                  <table class="table table-sm table-nowrap card-table">
                    <thead>
                      <tr>
                        <th>
                          <a href="#" class="text-muted sort" data-sort="epoch">
                            Epoch
                          </a>
                        </th>
                        <th>
                          <a href="#" class="text-muted sort" data-sort="training">
                            Training
                          </a>
                        </th>
                        <th>
                          <a href="#" class="text-muted sort" data-sort="validation">
                            Validation
                          </a>
                        </th>
                    </thead>
                    <tbody class="list" id="epochs-tbody">
                    </tbody>
                  </table>
                </div>
              </div>


              <div class="row justify-content-around">
                  <div class="col">
                    <button type="submit" id="train-model-button" class="btn btn-primary btn-md">
                          Start Training
                      </button>
                  </div>

              </div>

              <!-- Divider -->
              <hr class="mt-4 mb-5">

              <div class="row">
                  <div class="col">
                      <h2>
                         Deploy to Laptop
                     </h2>
                      <small class="form-text text-muted">
                      This changes the model that is used to make predictions when playing datasets in the datasets section.
                    </small>
                  </div>
              </div>
              <div class="row mb-5">
                  <div class="col">
                      <button type="submit" id="deploy-model-laptop-button" class="btn btn-primary btn-md">
                          Deploy Model
                      </button>
                  </div>
              </div>

              <!-- Divider -->
              <hr class="mt-4 mb-5">

              <div class="row">
                  <div class="col">
                      <h2>
                         Deploy to Vehicle
                     </h2>
                      <small class="form-text text-muted">
                      This creates an ssh connection to your raspberry pi, terminates any processes associated with the old model, transfers the new model, starts a new model API server, and tests that the API server is able to receive images.
                    </small>
                  </div>
              </div>
              <div class="row mb-5">
                  <div class="col">
                      <button type="submit" id="deploy-model-vehicle-button" class="btn btn-primary btn-md">
                          Deploy Model
                      </button>
                  </div>
              </div>

            <!-- Divider -->
            <hr class="mt-4 mb-5">

            <div class="row">
              <div class="col">
                 <h2>
                     Deployments
                 </h2>
              </div>
            </div>

              <form id="deployments-form">
                  <div class="form-group">
                      <label for="select-deployments-target-device">Device</label>
                      <select class="form-control" id="select-deployments-target-device">
                          <option id="deployments-laptop">Laptop</option>
                          <option id="deployments-pi">Pi</option>
                      </select>
                  </div>
                  <div class="form-group" style="display:block">
                      <label for="select-deployments-model-id">Model ID</label>
                      <select class="form-control" id="select-deployments-model-id">
                      </select>
                  </div>
              </form>

              <div class="row mb-5">
                  <div class="col">
                      <button type="submit" id="deploy-button" class="btn btn-primary btn-md">
                          Deploy Model
                      </button>
                  </div>
              </div>

            <div class="card" id="deployments-table-div" data-toggle="lists" data-lists-values='["dataset-id", "images"]'>
                <div class="card-header">
                  <div class="row align-items-center">
                    <div class="col">
                      <!-- Search -->
                      <form class="row align-items-center">
                        <div class="col-auto pr-0">
                          <span class="fe fe-search text-muted"></span>
                        </div>
                        <div class="col">
                            <input type="search" class="form-control form-control-flush search" placeholder="Search">
                        </div>
                      </form>
                    </div>
                  </div> <!-- / .row -->
                </div>
                <div class="table-responsive">
                  <table class="table table-sm table-nowrap card-table">
                    <thead>
                      <tr>
                          <th>
                              <a href="#" class="text-muted sort" data-sort="deployments-device">
                                Device
                              </a>
                          </th>
                          <th>
                              <a href="#" class="text-muted sort" data-sort="deployments-model-id">
                                Model ID
                              </a>
                          </th>
                          <th>
                              <a href="#" class="text-muted sort" data-sort="deployments-epoch-id">
                                Epoch ID
                              </a>
                          </th>
                          <th>
                              <a href="#" class="text-muted sort" data-sort="deployments-latency">
                                Latency (ms)
                              </a>
                          </th>
                          <th>
                              <a href="#" class="text-muted sort" data-sort="deployments-health">
                                Health (%)
                              </a>
                          </th>
                      </tr>
                    </thead>
                    <tbody class="list" id="deploymentsTbody">
                        <tr id="deployments-laptop-row">
                            <td class="deployments-device">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-airplay"><path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"></path><polygon points="12 15 17 21 7 21 12 15"></polygon></svg>
                                &nbsp; Laptop
                            </td>
                            <td class="deployments-model-id"></td>
                            <td class="deployments-epoch-id"></td>
                            <td class="deployments-latency"></td>
                            <td class="deployments-health"></td>
                        </tr>
                        <tr id="deployments-pi-row">
                            <td class="deployments-device">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-hard-drive"><line x1="22" y1="12" x2="2" y2="12"></line><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path><line x1="6" y1="16" x2="6" y2="16"></line><line x1="10" y1="16" x2="10" y2="16"></line></svg>
                                &nbsp; Pi
                            </td>
                            <td class="deployments-model-id"></td>
                            <td class="deployments-epoch-id"></td>
                            <td class="deployments-latency"></td>
                            <td class="deployments-health"></td>
                        </tr>
                    </tbody>
                  </table>
                </div>
            </div>

            </form>

          </div>
        </div> <!-- / .row -->
      </div> <!-- / .container-fluid -->
    </div> <!-- / .main-content -->

    <!-- JAVASCRIPT
    ================================================== -->
    @@include("partials/scripts.html")

    <script src="assets/js/datasets-common.js"></script>
    <script src="assets/js/machine-learning.js"></script>
    <script src="assets/js/common.js"></script>

  </body>
</html>